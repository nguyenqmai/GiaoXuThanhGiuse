<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-title style="margin: auto;flex-basis: 50px;">
                Contacts
            </ion-title>
        </ion-buttons>
        <ion-buttons *ngIf="canAddNewUsers()" slot="end">
            <ion-button (click)="addUser()">
                <ion-icon name="person-add" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-buttons>

    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
        <ion-refresher-content
                pullingIcon="arrow-dropdown"
                pullingText="Pull to refresh"
                refreshingSpinner="circles"
                refreshingText="Refreshing...">
        </ion-refresher-content>
    </ion-refresher>

    <ion-list lines="none">
        <ion-item *ngIf="waiting"><ion-spinner></ion-spinner></ion-item>

        <ion-card *ngFor="let contact of contacts"
                  button="true" (click)="tongleContactExpansion(contact)">
            <ion-card-header>
                <ion-card-subtitle *ngIf="contact.title">{{contact.title}}</ion-card-subtitle>
                <ion-item>
                    <ion-icon *ngIf="canUpdateUsers() && contact.expanded" name="create" slot="start" (click)="editUser(contact, $event)"></ion-icon>
                    {{contact.name}}
                </ion-item>
            </ion-card-header>
            <ion-card-content *ngIf="contact.expanded && (contact.email || contact.phone)">
                <ion-list lines="none">
                    <ion-item *ngIf="contact.email">
                        <ion-label position="end">{{contact.email}}</ion-label>
                        <ion-icon name="mail" slot="start"></ion-icon>
                    </ion-item>
                    <ion-item *ngIf="contact.phone">
                        <ion-label position="end">{{contact.phone}}</ion-label>
                        <ion-icon name="call" slot="start"></ion-icon>
                    </ion-item>
                    <ion-item>
                        <ion-label position="end">Schedule an appointment</ion-label>
                        <ion-icon name="calendar" slot="start"></ion-icon>
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>
    </ion-list>
</ion-content>

<!--<ion-fab *ngIf="canAddNewUsers()" vertical="top" horizontal="end" slot="fixed">-->
<!--    <ion-fab-button>-->
<!--        <ion-icon name="add" (click)="addUser()"></ion-icon>-->
<!--    </ion-fab-button>-->
<!--</ion-fab>-->

